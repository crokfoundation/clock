<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>CrokOS 시계</title>
    
    <!-- G마켓 산스 웹폰트 불러오기 -->
    <link href="https://webfontworld.github.io/gmarket/GmarketSans.css" rel="stylesheet">
    
    <style>
        /* 기본 스타일 초기화 */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* 스크롤 방지 */
        }

        body {
            background-color: #121212; /* 어두운 배경 */
            color: #ffffff; /* 흰색 글씨 */
            font-family: 'GmarketSans', sans-serif; /* G마켓 산스 폰트 */
            
            /* 2. 내용을 화면 정중앙에 배치 (탭과 패널 구조) */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh; /* 뷰포트 전체 높이 */
        }

        /* 앱 전체 컨테이너 */
        .app-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
        }

        /* --- 1. 탭 버튼 --- */
        .tabs {
            display: flex;
            justify-content: center;
            width: 100%;
            padding: 20px 0;
            margin-top: 40px; /* 상단 여백 */
        }

        .tab-btn {
            font-family: 'GmarketSans', sans-serif;
            font-size: 1.5em; /* 터치하기 쉬운 크기 */
            font-weight: 500;
            color: #888; /* 비활성 색상 */
            background: none;
            border: none;
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 4px solid transparent; /* 비활성 밑줄 */
        }

        .tab-btn.active {
            color: #ffffff; /* 활성 색상 */
            border-bottom: 4px solid #ffffff; /* 활성 밑줄 */
        }

        /* --- 2. 탭 패널 --- */
        .panels {
            flex-grow: 1; /* 탭을 제외한 나머지 공간 모두 차지 */
            width: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .panel {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s;
        }

        .panel.active {
            opacity: 1;
            visibility: visible;
        }

        /* --- 3. (시간) 패널 스타일 --- */
        .clock-container {
            text-align: center;
        }
        #date {
            font-size: 2.5em;
            font-weight: 300;
            opacity: 0.8;
        }
        #time {
            font-size: 7em;
            font-weight: 500;
            letter-spacing: 2px;
            margin-top: 10px;
        }

        /* --- 4. (타이머) 패널 스타일 --- */
        .timer-picker {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .picker-column {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .picker-label {
            font-size: 1.2em;
            opacity: 0.7;
            margin-bottom: 10px;
        }
        .picker-btn {
            font-family: 'GmarketSans', sans-serif;
            font-size: 3em; /* 터치하기 매우 쉽게 */
            font-weight: 100;
            color: #fff;
            background: none;
            border: none;
            cursor: pointer;
            padding: 10px;
            line-height: 1;
        }
        .picker-value {
            font-size: 5em; /* 큰 숫자 */
            font-weight: 500;
            width: 120px; /* 숫자 정렬 */
            text-align: center;
            margin: 0;
        }

        /* --- 5. (스톱워치) 패널 스타일 --- */
        .stopwatch-display {
            font-size: 7em;
            font-weight: 500;
            font-family: 'Menlo', 'monospace'; /* 숫자 고정폭 폰트 */
            letter-spacing: 2px;
        }
        .laps-list {
            list-style: none;
            padding: 0;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            width: 300px;
            text-align: center;
            font-size: 1.2em;
        }
        .laps-list li {
            padding: 5px;
            border-bottom: 1px solid #333;
        }

        /* --- 6. 공용 컨트롤 버튼 (타이머, 스톱워치) --- */
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }
        .control-btn {
            font-family: 'GmarketSans', sans-serif;
            font-size: 1.2em;
            font-weight: 500;
            color: #fff;
            border: none;
            width: 90px; /* 터치하기 쉬운 원형 */
            height: 90px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .control-btn.green { background-color: #28a745; }
        .control-btn.red { background-color: #dc3545; }
        .control-btn.gray { background-color: #6c757d; }
        .control-btn:active {
            transform: scale(0.95);
        }

        /* --- 7. 하단 워터마크 --- */
        .watermark {
            position: fixed; /* 화면에 고정 */
            bottom: 20px; /* 하단에서 20px */
            font-size: 1em;
            font-weight: 300;
            opacity: 0.6;
        }
    </style>
</head>
<body>

    <!-- 
      ▼▼▼ 타이머 알람 오디오 ▼▼▼
      "your-alarm-sound.mp3" 부분에 원하는 알람 mp3 파일 URL을 넣으세요.
    -->
    <audio id="alarm-audio">
        <source src="crokalarm.mp3" type="audio/mpeg">
    </audio>

    <!-- 앱 전체 컨테이너 -->
    <div class="app-container">

        <!-- 1. 탭 버튼 -->
        <nav class="tabs">
            <button class="tab-btn active" data-tab="time">시간</button>
            <button class="tab-btn" data-tab="timer">타이머</button>
            <button class="tab-btn" data-tab="stopwatch">스톱워치</button>
        </nav>

        <!-- 2. 탭 패널 -->
        <main class="panels">

            <!-- (시간) 패널 -->
            <div id="time-panel" class="panel active">
                <div class="clock-container">
                    <div id="date"></div>
                    <div id="time"></div>
                </div>
            </div>

            <!-- (타이머) 패널 -->
            <div id="timer-panel" class="panel">
                <div class="timer-picker">
                    <div class="picker-column">
                        <span class="picker-label">시</span>
                        <button class="picker-btn up" data-target="timer-hours">&uarr;</button>
                        <div id="timer-hours" class="picker-value">00</div>
                        <button class="picker-btn down" data-target="timer-hours">&darr;</button>
                    </div>
                    <div class="picker-column">
                        <span class="picker-label">분</span>
                        <button class="picker-btn up" data-target="timer-minutes">&uarr;</button>
                        <div id="timer-minutes" class="picker-value">05</div>
                        <button class="picker-btn down" data-target="timer-minutes">&darr;</button>
                    </div>
                    <div class="picker-column">
                        <span class="picker-label">초</span>
                        <button class="picker-btn up" data-target="timer-seconds">&uarr;</button>
                        <div id="timer-seconds" class="picker-value">00</div>
                        <button class="picker-btn down" data-target="timer-seconds">&darr;</button>
                    </div>
                </div>
                <div class="controls">
                    <button id="timer-start" class="control-btn green">시작</button>
                    <button id="timer-pause" class="control-btn red">일시정지</button>
                    <button id="timer-reset" class="control-btn gray">초기화</button>
                </div>
            </div>

            <!-- (스톱워치) 패널 -->
            <div id="stopwatch-panel" class="panel">
                <div class="stopwatch-display">00:00.00</div>
                <div class="controls">
                    <button id="sw-start" class="control-btn green">시작</button>
                    <button id="sw-stop" class="control-btn red">중지</button>
                    <button id="sw-lap" class="control-btn gray">랩</button>
                    <button id="sw-reset" class="control-btn gray">초기화</button>
                </div>
                <ul class="laps-list"></ul>
            </div>

        </main>
    </div>

    <!-- 하단 워터마크 -->
    <footer class="watermark">
        Made by CrokTEAM
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- 공통 요소 ---
            const tabs = document.querySelectorAll('.tab-btn');
            const panels = document.querySelectorAll('.panel');
            const alarmAudio = document.getElementById('alarm-audio');
            // 나중에 알람 URL을 여기에 설정하세요. 예: alarmAudio.src = "your-url.mp3";

            // --- 탭 전환 로직 ---
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // 모든 탭과 패널에서 active 클래스 제거
                    tabs.forEach(t => t.classList.remove('active'));
                    panels.forEach(p => p.classList.remove('active'));

                    // 클릭된 탭과 해당 패널에 active 클래스 추가
                    tab.classList.add('active');
                    const targetPanel = document.getElementById(tab.dataset.tab + '-panel');
                    targetPanel.classList.add('active');
                });
            });


            // --- 1. (시간) 패널 로직 ---
            const dateElement = document.getElementById('date');
            const timeElement = document.getElementById('time');

            function updateClock() {
                const now = new Date();
                const year = now.getFullYear();
                const month = now.getMonth() + 1;
                const day = now.getDate();
                const dayOfWeek = ['일', '월', '화', '수', '목', '금', '토'][now.getDay()];
                dateElement.textContent = `${year}년 ${month}월 ${day}일 (${dayOfWeek})`;

                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                timeElement.textContent = `${hours}:${minutes}:${seconds}`;
            }
            updateClock();
            setInterval(updateClock, 1000);


            // --- 2. (타이머) 패널 로직 ---
            const timerHoursEl = document.getElementById('timer-hours');
            const timerMinutesEl = document.getElementById('timer-minutes');
            const timerSecondsEl = document.getElementById('timer-seconds');
            const timerPickerBtns = document.querySelectorAll('.picker-btn');
            
            const timerStartBtn = document.getElementById('timer-start');
            const timerPauseBtn = document.getElementById('timer-pause');
            const timerResetBtn = document.getElementById('timer-reset');

            let timerInterval = null;
            let timerTotalSeconds = 0;
            let timerRunning = false;
            
            // 타이머 숫자 피커 조작
            timerPickerBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    if (timerRunning) return; // 타이머 실행 중에는 조작 불가
                    
                    const targetEl = document.getElementById(btn.dataset.target);
                    let value = parseInt(targetEl.textContent);
                    const isUp = btn.classList.contains('up');
                    
                    let max = 59;
                    if (btn.dataset.target === 'timer-hours') max = 23;

                    if (isUp) {
                        value = (value + 1) % (max + 1);
                    } else {
                        value = (value - 1 + (max + 1)) % (max + 1);
                    }
                    targetEl.textContent = String(value).padStart(2, '0');
                });
            });

            // 타이머 시작
            timerStartBtn.addEventListener('click', () => {
                if (timerRunning) return;

                const hours = parseInt(timerHoursEl.textContent);
                const minutes = parseInt(timerMinutesEl.textContent);
                const seconds = parseInt(timerSecondsEl.textContent);
                timerTotalSeconds = (hours * 3600) + (minutes * 60) + seconds;

                if (timerTotalSeconds > 0) {
                    timerRunning = true;
                    timerInterval = setInterval(runTimerTick, 1000);
                }
            });

            // 타이머 1초마다 실행
            function runTimerTick() {
                if (timerTotalSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerRunning = false;
                    alarmAudio.play(); // 알람 울리기
                    alert("타이머 종료!"); // (CrokOS가 alert를 지원하지 않으면 이 부분을 커스텀 모달로 바꿔야 합니다)
                    return;
                }
                
                timerTotalSeconds--;
                updateTimerDisplay();
            }

            // 타이머 디스플레이 업데이트
            function updateTimerDisplay() {
                const h = Math.floor(timerTotalSeconds / 3600);
                const m = Math.floor((timerTotalSeconds % 3600) / 60);
                const s = timerTotalSeconds % 60;
                
                timerHoursEl.textContent = String(h).padStart(2, '0');
                timerMinutesEl.textContent = String(m).padStart(2, '0');
                timerSecondsEl.textContent = String(s).padStart(2, '0');
            }

            // 타이머 일시정지
            timerPauseBtn.addEventListener('click', () => {
                clearInterval(timerInterval);
                timerRunning = false;
            });

            // 타이머 초기화
            timerResetBtn.addEventListener('click', () => {
                clearInterval(timerInterval);
                timerRunning = false;
                timerTotalSeconds = 0;
                timerHoursEl.textContent = '00';
                timerMinutesEl.textContent = '05'; // 기본값 5분으로
                timerSecondsEl.textContent = '00';
                alarmAudio.pause();
                alarmAudio.currentTime = 0;
            });

            // --- 3. (스톱워치) 패널 로직 ---
            const swDisplay = document.querySelector('.stopwatch-display');
            const swStartBtn = document.getElementById('sw-start');
            const swStopBtn = document.getElementById('sw-stop');
            const swLapBtn = document.getElementById('sw-lap');
            const swResetBtn = document.getElementById('sw-reset');
            const swLapsList = document.querySelector('.laps-list');

            let swInterval = null;
            let swStartTime = 0;
            let swElapsedTime = 0;
            let swRunning = false;
            let swLaps = [];

            // 스톱워치 시간 포맷 (MM:SS.ms)
            function formatStopwatchTime(ms) {
                const minutes = Math.floor(ms / 60000);
                const seconds = Math.floor((ms % 60000) / 1000);
                const milliseconds = Math.floor((ms % 1000) / 10); // 2자리
                
                return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}.${String(milliseconds).padStart(2, '0')}`;
            }

            // 스톱워치 시작
            swStartBtn.addEventListener('click', () => {
                if (swRunning) return;
                swRunning = true;
                // 중지했다가 다시 시작할 때를 대비해, (현재 - 총 경과시간)으로 시작시간 보정
                swStartTime = Date.now() - swElapsedTime;
                swInterval = setInterval(() => {
                    swElapsedTime = Date.now() - swStartTime;
                    swDisplay.textContent = formatStopwatchTime(swElapsedTime);
                }, 10); // 10ms 마다 업데이트
            });
            
            // 스톱워치 중지
            swStopBtn.addEventListener('click', () => {
                if (!swRunning) return;
                swRunning = false;
                clearInterval(swInterval);
            });
            
            // 스톱워치 랩
            swLapBtn.addEventListener('click', () => {
                if (!swRunning) return;
                const lapTime = swDisplay.textContent;
                swLaps.push(lapTime);
                
                const li = document.createElement('li');
                li.textContent = `랩 ${swLaps.length}: ${lapTime}`;
                swLapsList.prepend(li); // 최근 랩을 맨 위에 추가
            });
            
            // 스톱워치 초기화
            swResetBtn.addEventListener('click', () => {
                clearInterval(swInterval);
                swRunning = false;
                swElapsedTime = 0;
                swLaps = [];
                swDisplay.textContent = '00:00.00';
                swLapsList.innerHTML = ''; // 랩 목록 비우기
            });
        });
    </script>

</body>
</html>

